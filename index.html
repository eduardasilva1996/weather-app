<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Weather App</title>
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.0.7/css/all.css">    
    <link rel="stylesheet" href="../CSS/style.css"> <!-- Link to external CSS (optional) -->
</head>
<body>
   
    <div class="right-hero"> 
        <div class="buildings-holder">
                      <div class="skylight">
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 1656 390" style="enable-background:new 0 0 1656 390;" xml:space="preserve">
        <g>
          
            <image style="overflow:visible;" width="114" height="114" xlink:href="data:image/png;base64,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
        4GUDIBeI8QAAAABJRU5ErkJggg==" transform="matrix(1 0 0 1 701 -31)">
          </image>
        </g>
        </svg>
                      </div>
                      <div class="window">  
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 1656 390" style="enable-background:new 0 0 1656 390;" xml:space="preserve">
        <style type="text/css">
          .rect0{fill:#F9CD61;}
        </style>
        <g>
          <rect x="283" y="222" class="rect0" width="20" height="12"/>
          <rect x="283" y="293" class="rect0" width="20" height="12"/>
          <rect x="388" y="294" class="rect0" width="20" height="12"/>
          <rect x="449" y="354" class="rect0" width="20" height="12"/>
          <rect x="449" y="243" class="rect0" width="20" height="12"/>
          <rect x="520" y="173" class="rect0" width="20" height="12"/>
          <rect x="613" y="244" class="rect0" width="20" height="12"/>
          <rect x="654" y="244" class="rect0" width="20" height="12"/>
          <rect x="685" y="224" class="rect0" width="20" height="12"/>
          <rect x="685" y="325" class="rect0" width="20" height="12"/>
          <rect x="766" y="165" class="rect0" width="20" height="12"/>
          <rect x="827" y="165" class="rect0" width="20" height="12"/>
          <rect x="827" y="246" class="rect0" width="20" height="12"/>
          <rect x="899" y="246" class="rect0" width="20" height="12"/>
          <rect x="899" y="327" class="rect0" width="20" height="12"/>
          <rect x="1029" y="308" class="rect0" width="20" height="12"/>
          <rect x="1069" y="206" class="rect0" width="20" height="12"/>
          <rect x="1069" y="135" class="rect0" width="20" height="12"/>
          <rect x="1129" y="248" class="rect0" width="20" height="12"/>
          <rect x="1129" y="177" class="rect0" width="20" height="12"/>
          <rect x="1170" y="214" class="rect0" width="20" height="12"/>
          <rect x="1294" y="184" class="rect0" width="20" height="12"/>
          <rect x="1294" y="245" class="rect0" width="20" height="12"/>
          <rect x="1264" y="296" class="rect0" width="20" height="12"/>
        </g>
        </svg>
                      </div>
                                 <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                         viewBox="0 0 1656 390" style="enable-background:new 0 0 1656 390;" xml:space="preserve">
                      <style type="text/css">
                          .stBuildings{fill:white;stroke-miterlimit:10;}
                      </style>
                      <polyline class="stBuildings" points="11.5,376.5 275.5,376.5 275.5,202.5 319.5,202.5 319.5,184.5 375.5,184.5 375.5,204.5 423.5,204.5 
                        423.5,267.5 433.5,267.5 433.5,152.5 464.5,152.5 464.5,140.5 481.5,140.5 481.5,128.5 506.5,128.5 506.5,140.5 524.5,140.5 
                        524.5,152.5 555.5,152.5 555.5,307.5 568.5,282.5 604.5,282.5 604.5,224.5 613.5,224.5 613.5,199.5 642.5,199.5 642.5,181.5 
                        651.5,181.5 651.5,149.5 679.5,149.5 679.5,180.5 691.5,180.5 691.5,197.5 718.5,197.5 718.5,220.5 730.5,220.5 730.5,288.5 
                        740.5,288.5 740.5,125.5 754.5,85.5 754.5,26.5 761.5,26.5 761.5,84.5 777.5,125.5 792.5,87.5 831.5,87.5 831.5,95.5 865.5,95.5 
                        889.5,132.5 905.5,148.5 926.5,148.5 926.5,134.5 934.5,134.5 934.5,99.5 944.5,99.5 944.5,137.5 948.5,137.5 948.5,96.5 
                        958.5,96.5 958.5,305.5 997.5,305.5 997.5,97.5 1022.5,97.5 1022.5,72.5 1075.5,72.5 1075.5,96.5 1107.5,96.5 1107.5,338.5 
                        1117.5,338.5 1117.5,141.5 1126.5,141.5 1135.5,120.5 1135.5,139.5 1209.5,139.5 1209.5,317.5 1229.5,317.5 1229.5,324.5 
                        1255.5,324.5 1256.5,157.5 1325.5,157.5 1325.5,278.5 1334.5,278.5 1334.5,320.5 1341.5,320.5 1341.5,339.5 1371.5,339.5 
                        1371.5,377.5 1639.5,377.5 "/>
                      </svg>
                    </div>
                    <!-- Sun -->
                    <div class="anim-sun" style = "display: none;"></div>
                    <!-- clouds -->
                    <div class="anim-cloud"></div>
                    <div class="anim-cloud2"></div>
                    <div class="anim-cloud3"></div>
                     <i class="fas fa-moon" id="anim-moon" style="display: none;"></i> 
            
                </div>
              </div>
            </div>
          </div>

    <div class="card">
        <div class="search">
            <i class="fas fa-map-marker-alt" id="location"></i>
            <input type="text" placeholder="Enter city name" spellcheck="false">
            <button class="btn"><i class="fas fa-search"></i></button>
        </div>
        <div class="error">
            <p>Invalid city name</p>
        </div>
        <div class="weather">
            <img src="../images/clear.png" class="weather-icon">
            <h1 class="temp">22°C</h1>
            <h2 class="city">Rotterdam</h2>
            <div class="details">
                <div class="col">
                    <img src="../images/flood.svg">
                    <div>
                    <p class="humidity">50%</p>
                    <p>Humidity</p>
                    </div>
                </div>
                <div class="col">
                    <img src="../images/wind.svg">
                    <div>
                    <p class="wind">15 km/h</p>
                    <p>Wind Speed</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- for the animation i took inspiration from a code pen code :) -->

<!--This is how i can call an API to use to get the data i need-->
<script>

// This function i wrote to get the current time and depending on whether is night or day it will show a moon or sun in the animation.
    function checkTime()
    {
        const currentTime = new Date().getHours();

        const sun = document.querySelector('.anim-sun');
        const moon = document.getElementById('anim-moon');

        if(currentTime >=6 && currentTime < 18)
        {
            sun.style.display = 'block';
            moon.style.display = 'none';
        }
        else
        {
            sun.style.display = 'none';
            moon.style.display = 'block';
        }
        
    }

    const apiKey = "00e234f299361d30e20f50144a6ec9d0";
    const apiUrl = "http://api.openweathermap.org/data/2.5/weather?units=metric&q=";
    const searchBox = document.querySelector(".search input");
    const searchBtn = document.querySelector(".search button");
    const weatherIcon = document.querySelector(".weather-icon");
    // const apiKeyBackImg = "E_JzhM5zHWtnK6G4SktB7KPhOwTc3ioujMQVra_XVpw";
    // const apiUrlBackImg = "https://api.unsplash.com/search/photos?query=";
    // const apiUrlRandom = "https://api.unsplash.com/photos/random"

    // with this function i can retrieve a random photo from the unsplash API in the categories of 'City'. 
    // In a first approach for my weather app, this was the design i was tried
    // async function fetchRandomPhoto()
    // {
    //     const responseRandom = await fetch(apiUrlRandom + '?client_id=' + apiKeyBackImg + '&query=city');
    //     const dataRnadom = await responseRandom.json();

    //     if(responseRandom.ok)
    //     {
    //         const randomUrl = dataRnadom.urls.regular;
    //         document.body.style.backgroundImage = `url(${randomUrl})`;
    //     }
    //     else
    //     {
    //         console.error("no image", dataRnadom);
    //         document.body.style.backgroundImage = "black";
    //     }
    // }

    async function checkWeather(city){
        const response = await fetch(apiUrl + city + '&appid=' + apiKey);
        var data = await response.json();

        if(response.status == 404)
        {
            document.querySelector(".error").style.display = "block";
            document.querySelector(".weather").style.display = "none";
        }
        else
        {
        document.querySelector(".city").innerHTML = data.name;
        document.querySelector(".temp").innerHTML = Math.round(data.main.temp) + "°c" ;
        document.querySelector(".humidity").innerHTML = data.main.humidity + "%";
        document.querySelector(".wind").innerHTML = data.wind.speed + " km/h";

        if(data.weather[0].main == "Clouds")
        {
            weatherIcon.src = "../images/mist.png";
        }
        else if (data.weather[0].main == "Clear")
        {
            weatherIcon.src = "../images/clear.png";
        }
        else if (data.weather[0].main == "Rain")
        {
            weatherIcon.src = "../images/rain.png";
        }
        else if (data.weather[0].main == "Drizzle")
        {
            weatherIcon.src = "../images/drizzle.png";
        }
        document.querySelector(".weather").style.display = "block";
        document.querySelector(".error").style.display = "none";
    }

    // Here I call the unsplash API to get a picture of the city im searching for the weather and update the background.
    // const responseBackImg = await fetch(apiUrlBackImg + city + '&client_id=' + apiKeyBackImg);
    // var imageData = await responseBackImg.json();

    // if(imageData.results.length > 0)
    // {
    //     const cityImage = imageData.results[0].urls.regular;
    //     document.body.style.backgroundImage = `url(${cityImage})`; 
    // }
    // else
    // {
    //     fetchRandomPhoto();
    // }
}

    searchBtn.addEventListener("click", ()=>
{
    checkWeather(searchBox.value);
})
    checkWeather();
    //fetchRandomPhoto();
    checkTime();
    

</script>
</body>
</html>